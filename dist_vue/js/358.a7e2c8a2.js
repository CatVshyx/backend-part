"use strict";(self["webpackChunkcms_yurka"]=self["webpackChunkcms_yurka"]||[]).push([[358],{7648:function(e,t,n){n.d(t,{Z:function(){return x}});var i=n(3396),s=n(7139),r=n(9242);const o=e=>((0,i.dD)("data-v-44f42a5e"),e=e(),(0,i.Cn)(),e),a={class:"filter-bar-container"},l=o((()=>(0,i._)("i",{class:"fa-regular fa-arrow-down-triangle-square"},null,-1))),d=[l],c={class:"head-top"},p={class:"title"},u={style:{"font-size":"22px"}},m={key:0,class:"buttons"},k=o((()=>(0,i._)("i",{class:"fa-solid fa-plus"},null,-1))),h=o((()=>(0,i._)("p",null,"Додати",-1))),f=[k,h];function v(e,t,n,o,l,k){const h=(0,i.up)("HeadbarPlus"),v=(0,i.up)("MinSearchBar");return(0,i.wg)(),(0,i.iD)(i.HY,null,[e.canAdd?((0,i.wg)(),(0,i.j4)(h,{key:0,onClick:t[0]||(t[0]=t=>e.$emit("clickAdd"))})):(0,i.kq)("",!0),(0,i._)("div",a,[(0,i._)("div",{class:(0,s.C_)(["filter-bar",{right:!e.canAdd}])},[e.sortable?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"sort",onClick:t[1]||(t[1]=(0,r.iM)((t=>e.$emit("openSorting")),["stop"]))},d)):(0,i.kq)("",!0),(0,i.Wm)(v,{class:"search-bar",onInput:e.setFilter},null,8,["onInput"]),(0,i.WI)(e.$slots,"default",{},void 0,!0)],2)]),(0,i._)("div",c,[(0,i._)("div",p,[(0,i._)("h2",u,(0,s.zw)(e.title),1)]),e.canAdd?((0,i.wg)(),(0,i.iD)("div",m,[(0,i._)("button",{class:"button add",onClick:t[2]||(t[2]=t=>e.$emit("clickAdd"))},f)])):(0,i.kq)("",!0)])],64)}var y=n(7106);const g=e=>((0,i.dD)("data-v-583e7645"),e=e(),(0,i.Cn)(),e),_=g((()=>(0,i._)("i",{class:"fa-solid fa-plus"},null,-1))),w=[_];function b(e,t,n,s,r,o){return(0,i.wg)(),(0,i.j4)(i.lR,{to:"#mobile-headbar"},[(0,i._)("button",{class:"headbar-plus",onClick:t[0]||(t[0]=t=>e.$emit("click",t))},w)])}var C=(0,i.aZ)({name:"HeadbarPlus",setup:()=>({}),data:()=>({}),mounted(){},computed:{},methods:{},emits:{click:e=>!0}}),I=n(89);const Z=(0,I.Z)(C,[["render",b],["__scopeId","data-v-583e7645"]]);var L=Z,T=(0,i.aZ)({name:"PageHead",components:{MinSearchBar:y.Z,HeadbarPlus:L},props:{title:{type:String,required:!0},canAdd:{type:Boolean,default:!0},sortable:Boolean},setup:()=>({}),computed:{},methods:{openSorting(){},setFilter(e){this.$emit("setFilter",e.target.value.toLowerCase())}},emits:{clickAdd:()=>!0,setFilter:e=>!0,openSorting:()=>!0}});const D=(0,I.Z)(T,[["render",v],["__scopeId","data-v-44f42a5e"]]);var x=D},7358:function(e,t,n){n.r(t),n.d(t,{default:function(){return ie}});var i=n(3396),s=n(7139),r=n(9242);const o=e=>((0,i.dD)("data-v-1746c88c"),e=e(),(0,i.Cn)(),e),a={class:"goverment-link-page"},l={class:"links"},d=["title","onClick"],c={class:"name"},p={key:0,class:"description"},u=["onClick"],m=o((()=>(0,i._)("i",{class:"fa-regular fa-pen"},null,-1))),k=[m],h={key:2,class:"fa-regular fa-share-from-square link-icon"};function f(e,t,n,o,m,f){const v=(0,i.up)("PageHead"),y=(0,i.up)("EditLinkModal"),g=(0,i.up)("AddLinkModal");return(0,i.wg)(),(0,i.iD)("div",a,[(0,i.Wm)(v,{title:e.typeName,"can-add":e.session.me?.admin,onSetFilter:t[0]||(t[0]=t=>e.filter=t),onClickAdd:t[1]||(t[1]=t=>e.openModal("add-link-modal"))},null,8,["title","can-add"]),(0,i._)("div",l,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.filteredLinks,(t=>((0,i.wg)(),(0,i.iD)("button",{class:"link component",key:t.id,title:t.link,onClick:n=>e.openLink(t)},[(0,i._)("p",c,(0,s.zw)(t.name),1),t.description?((0,i.wg)(),(0,i.iD)("p",p,(0,s.zw)(t.description),1)):(0,i.kq)("",!0),e.session.me?.admin?((0,i.wg)(),(0,i.iD)("button",{key:1,class:"edit",onClick:(0,r.iM)((n=>e.openModal("edit-link-modal",t)),["stop"])},k,8,u)):((0,i.wg)(),(0,i.iD)("i",h))],8,d)))),128))]),e.govType?((0,i.wg)(),(0,i.j4)(y,{key:0,ref:"edit-link-modal","gov-type":e.govType,onReload:t[2]||(t[2]=t=>e.loadLink(e.govType))},null,8,["gov-type"])):(0,i.kq)("",!0),e.govType?((0,i.wg)(),(0,i.j4)(g,{key:1,ref:"add-link-modal","gov-type":e.govType,onReload:t[3]||(t[3]=t=>e.loadLink(e.govType))},null,8,["gov-type"])):(0,i.kq)("",!0)])}var v=n(2881),y=n(727),g=n(4074),_=n(7648);const w=e=>((0,i.dD)("data-v-dc71237c"),e=e(),(0,i.Cn)(),e),b={class:"input-block"},C=w((()=>(0,i._)("label",{for:"name"},"Назва:",-1))),I={class:"error-label"},Z={class:"input-block"},L=w((()=>(0,i._)("label",{for:"description"},"Опис:",-1))),T={class:"error-label"},D={class:"input-block"},x=w((()=>(0,i._)("label",{for:"link"},"Посилання:",-1))),B={class:"error-label"};function M(e,t,n,r,o,a){const l=(0,i.up)("Modal");return(0,i.wg)(),(0,i.j4)(l,{props:e.$props,ref:"modal"},{default:(0,i.w5)((()=>[(0,i._)("div",b,[C,(0,i._)("input",{type:"text",name:"name",id:"name",onInput:t[0]||(t[0]=t=>e.errors.name="")},null,32)]),(0,i._)("p",I,(0,s.zw)(e.errors.name),1),(0,i._)("div",Z,[L,(0,i._)("input",{type:"text",name:"description",id:"description",onInput:t[1]||(t[1]=t=>e.errors.description="")},null,32)]),(0,i._)("p",T,(0,s.zw)(e.errors.description),1),(0,i._)("div",D,[x,(0,i._)("input",{type:"text",name:"link",id:"link",onInput:t[2]||(t[2]=t=>e.errors.link="")},null,32)]),(0,i._)("p",B,(0,s.zw)(e.errors.link),1)])),_:1},8,["props"])}var $=n(9197),j=n(2492),q=n.n(j),A=n(5222),z=(0,i.aZ)({name:"AddLinkModal",components:{Modal:$.Z},mixins:[y.O],props:{...$.w,govType:{type:Object,required:!0}},setup:()=>({}),data:()=>({errors:{name:"",link:"",description:""}}),mounted(){},computed:{},methods:{hasError(){for(let e of Object.values(this.errors))if(e)return!0;return!1},clearFields(){for(let e of Object.keys(this.errors))this.errors[e]="",this.selectInput(e).value=""},async open(){this.clearFields(),q().fire({title:"Додати посилання",html:this.modalHTML(),customClass:"show-overflow",showCancelButton:!0,confirmButtonText:"Додати",cancelButtonText:"Повернутися",preConfirm:()=>{const e=this.selectInput("name").value;e||(this.errors.name="Обовʼязкове поле");const t=this.selectInput("link").value;t||(this.errors.link="Обовʼязкове поле");const n=this.selectInput("description").value||"";return n.length>250&&(this.errors.description="Макимально 250 символів"),!this.hasError()&&{typeId:this.govType.id,name:e,link:t,description:n}}}).then((async e=>{e.isConfirmed&&e.value&&(await v.Z.createLink(e.value),A.Z.toast("Посилання було успішно створено","success"),this.$emit("reload"))})).catch((e=>{console.error(e),q().fire("Помилка",A.Z.errorOf(e),"error")}))}},emits:{reload:()=>!0}}),H=n(89);const O=(0,H.Z)(z,[["render",M],["__scopeId","data-v-dc71237c"]]);var F=O,S=n(5754);const E=e=>((0,i.dD)("data-v-6929d4a8"),e=e(),(0,i.Cn)(),e),P={class:"input-block"},R=E((()=>(0,i._)("label",{for:"name"},"Назва:",-1))),N={class:"error-label"},W={class:"input-block"},Y=E((()=>(0,i._)("label",{for:"description"},"Опис:",-1))),G={class:"error-label"},K={class:"input-block"},U=E((()=>(0,i._)("label",{for:"link"},"Посилання:",-1))),V={class:"error-label"};function J(e,t,n,r,o,a){const l=(0,i.up)("Modal");return(0,i.wg)(),(0,i.j4)(l,{props:e.$props,ref:"modal"},{default:(0,i.w5)((()=>[(0,i._)("div",P,[R,(0,i._)("input",{type:"text",name:"name",id:"name",onInput:t[0]||(t[0]=t=>e.errors.name="")},null,32)]),(0,i._)("p",N,(0,s.zw)(e.errors.name),1),(0,i._)("div",W,[Y,(0,i._)("input",{type:"text",name:"description",id:"description",onInput:t[1]||(t[1]=t=>e.errors.description="")},null,32)]),(0,i._)("p",G,(0,s.zw)(e.errors.description),1),(0,i._)("div",K,[U,(0,i._)("input",{type:"text",name:"link",id:"link",onInput:t[2]||(t[2]=t=>e.errors.link="")},null,32)]),(0,i._)("p",V,(0,s.zw)(e.errors.link),1)])),_:1},8,["props"])}var Q=(0,i.aZ)({name:"AddLinkModal",components:{Modal:$.Z},mixins:[y.O],props:{...$.w,govType:{type:Object,required:!0}},setup:()=>({}),data:()=>({errors:{name:"",link:"",description:""}}),mounted(){},computed:{},methods:{hasError(){for(let e of Object.values(this.errors))if(e)return!0;return!1},clearFields(){for(let e of Object.keys(this.errors))this.errors[e]="",this.selectInput(e).value=""},async deleteLink(e){q().fire({icon:"question",title:"Ви впевнені?",text:"Ви впевнені що хочете видалити посилання "+e.name+"?",showConfirmButton:!1,showCancelButton:!0,showDenyButton:!0,focusCancel:!0,denyButtonText:"Видалити",cancelButtonText:"Ні"}).then((async t=>{t.isDenied&&(await v.Z.deleteLink(e.id),this.$emit("reload"),q().fire("Успіх","Посилання "+e.name+" було видалено","success"))})).catch((e=>{console.error(e),A.Z.swalError(e)}))},async open(e){this.clearFields(),this.setInput("name",e.name),this.setInput("link",e.link),this.setInput("description",e.description),q().fire({title:"Редагувати посилання",html:this.modalHTML(),customClass:"show-overflow",showCancelButton:!0,showDenyButton:!0,confirmButtonText:"Зберегти",cancelButtonText:"Повернутися",denyButtonText:'<i class="fa-regular fa-trash"></i>',preConfirm:()=>{const t=this.selectInput("name").value;t||(this.errors.name="Обовʼязкове поле");const n=this.selectInput("link").value;n||(this.errors.link="Обовʼязкове поле");const i=this.selectInput("description").value||"";return i.length>250&&(this.errors.description="Макимально 250 символів"),!this.hasError()&&{typeId:e.typeId||this.govType.id,id:e.id,name:t,link:n,description:i}}}).then((async t=>{t.isDenied?this.deleteLink(e):t.isConfirmed&&t.value&&(await v.Z.editLink(t.value),A.Z.toast("Посилання було успішно змінено","success"),this.$emit("reload"))})).catch((e=>{console.error(e),q().fire("Помилка",A.Z.errorOf(e),"error")}))}},emits:{reload:()=>!0}});const X=(0,H.Z)(Q,[["render",J],["__scopeId","data-v-6929d4a8"]]);var ee=X,te=(0,i.aZ)({name:"GovermentLinkPage",components:{PageHead:_.Z,AddLinkModal:F,EditLinkModal:ee},mixins:[y.V],setup:()=>({session:(0,g.Z)(),store:(0,S.Z)()}),data:()=>({links:void 0,filter:""}),computed:{filteredLinks(){if(!this.filter)return this.links;const e=this.filter.toLowerCase().trim();return this.links?.filter((t=>t.name.toLowerCase().includes(e)||t.description?.toLowerCase().includes(e)))},typeName(){return decodeURIComponent(this.$route.path.substring(16))},govType(){const e=this.typeName;return this.store.types?.find((t=>t.name==e))}},mounted(){this.govType&&this.loadLink(this.govType)},methods:{loadLink(e){this.links=void 0,v.Z.getLinks(e.id).then((t=>{this.govType?.id==e.id&&(this.links=t)})).catch((e=>{console.error("link error",e)}))},openLink(e){"object"==typeof e&&(e=e.link),window.open(e,"_blank")?.focus()}},watch:{govType(e,t){this.links=void 0,e&&this.loadLink(e)}},emits:{}});const ne=(0,H.Z)(te,[["render",f],["__scopeId","data-v-1746c88c"]]);var ie=ne},7106:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(3396);const s=e=>((0,i.dD)("data-v-43d92d95"),e=e(),(0,i.Cn)(),e),r={class:"search-bar"},o=s((()=>(0,i._)("i",{class:"fa-solid fa-magnifying-glass"},null,-1))),a=s((()=>(0,i._)("p",null,"+",-1))),l=[a];function d(e,t,n,s,a,d){return(0,i.wg)(),(0,i.iD)("div",r,[o,(0,i._)("input",{type:"text",placeholder:"Пошук",onInput:t[0]||(t[0]=t=>e.$emit("input",t))},null,32),e.create?((0,i.wg)(),(0,i.iD)("button",{key:0,class:"create",onClick:t[1]||(t[1]=t=>e.$emit("create",t))},l)):(0,i.kq)("",!0)])}var c=(0,i.aZ)({name:"MinSearchBar",props:{create:Boolean},emits:{input:e=>!0,create:e=>!0}}),p=n(89);const u=(0,p.Z)(c,[["render",d],["__scopeId","data-v-43d92d95"]]);var m=u}}]);